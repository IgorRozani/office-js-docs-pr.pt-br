# <a name="authentication-patterns"></a><span data-ttu-id="778fb-101">Padrões de autenticação</span><span class="sxs-lookup"><span data-stu-id="778fb-101">Authentication patterns</span></span>

<span data-ttu-id="778fb-102">Suplementos podem exigir que os usuários entrem ou se inscrevam para acessar recursos e funcionalidades.</span><span class="sxs-lookup"><span data-stu-id="778fb-102">Add-ins may require users to sign-in or sign-up in order to access features and functionality.</span></span> <span data-ttu-id="778fb-103">Caixas de entrada para nome de usuário e senha ou botões que iniciam fluxos de credenciais de terceiros são controles de interface comuns em experiências de autenticação.</span><span class="sxs-lookup"><span data-stu-id="778fb-103">Input boxes for username and password or buttons that start third party credential flows are common interface controls in authentication experiences.</span></span> <span data-ttu-id="778fb-104">Uma experiência de autenticação simples e eficiente é um passo inicial importante para que os usuários comecem a interagir com seu suplemento.</span><span class="sxs-lookup"><span data-stu-id="778fb-104">A simple and efficient authentication experience is an important first step to getting users started with your add-in.</span></span>

## <a name="best-practices"></a><span data-ttu-id="778fb-105">Práticas recomendadas</span><span class="sxs-lookup"><span data-stu-id="778fb-105">Best practices</span></span>

|<span data-ttu-id="778fb-106">Fazer</span><span class="sxs-lookup"><span data-stu-id="778fb-106">Do</span></span>|<span data-ttu-id="778fb-107">Não fazer</span><span class="sxs-lookup"><span data-stu-id="778fb-107">Don't</span></span>|
|:----|:----|
|<span data-ttu-id="778fb-108">Usar o logon único (SSO) para autenticar usuários em seu suplemento.</span><span class="sxs-lookup"><span data-stu-id="778fb-108">Use single sign-on (SSO) to authenticate users into your add-in.</span></span>|<span data-ttu-id="778fb-109">Exigir que usuários conectem-se ao seu suplemento usando credenciais diferentes de suas contas pessoais da Microsoft ou de suas contas do Office 365 (profissional ou estudantil).</span><span class="sxs-lookup"><span data-stu-id="778fb-109">Require users to sign into your add-in separately from their personal Microsoft account or their Office 365 account (work or school).</span></span>|
|<span data-ttu-id="778fb-110">Antes de fazer o usuário se conectar, descrever o valor de seu suplemento ou demonstrar funcionalidades sem exigir uma conta.</span><span class="sxs-lookup"><span data-stu-id="778fb-110">Prior to sign-in, describe the value of your add-in or demonstrate functionality without requiring an account.</span></span> |<span data-ttu-id="778fb-111">Esperar que os usuários se conectem sem entender o valor e os benefícios de seu complemento.</span><span class="sxs-lookup"><span data-stu-id="778fb-111">Expect users to sign-in without understanding the value and benefits of your add-in.</span></span>|
|<span data-ttu-id="778fb-112">Guiar os usuários por meio de fluxos de autenticação com um botão primário, altamente visível em cada tela.</span><span class="sxs-lookup"><span data-stu-id="778fb-112">Guide users through authentication flows with a primary, highly visible button on each screen.</span></span> |<span data-ttu-id="778fb-113">Chamar atenção para tarefas secundárias e terciárias com botões e solicitações de ação concorrentes entre si.</span><span class="sxs-lookup"><span data-stu-id="778fb-113">Draw attention to secondary and tertiary tasks with competing buttons and calls to action.</span></span>|
|<span data-ttu-id="778fb-114">Usar rótulos claros de botão que descrevam tarefas específicas, como "Entrar" ou "Criar conta".</span><span class="sxs-lookup"><span data-stu-id="778fb-114">Use clear button labels that describe specific tasks like "Sign in" or "Create account".</span></span>   |<span data-ttu-id="778fb-115">Usar rótulos de botão vagos, como "Enviar" ou "Começar" para orientar os usuários em fluxos de autenticação.</span><span class="sxs-lookup"><span data-stu-id="778fb-115">Use vague button labels like "Submit" or "Get started" to guide users through authentication flows.</span></span>|
|<span data-ttu-id="778fb-116">Usar um diálogo para focar a atenção dos usuários nos formulários de autenticação.</span><span class="sxs-lookup"><span data-stu-id="778fb-116">Use a dialog to focus users' attention on authentication forms.</span></span>    |<span data-ttu-id="778fb-117">Sobrecarregar seu painel de tarefas com uma tela de apresentação e formulários de autenticação.</span><span class="sxs-lookup"><span data-stu-id="778fb-117">Overcrowd your task pane with a first run experience and authentication forms.</span></span>|
|<span data-ttu-id="778fb-118">Encontrar pequenas eficiências no fluxo, como foco automático nas caixas de entrada.</span><span class="sxs-lookup"><span data-stu-id="778fb-118">Find small efficiencies in the flow like auto-focusing on input boxes.</span></span> |<span data-ttu-id="778fb-119">Adicionar etapas desnecessárias à interação, como exigir que os usuários cliquem nos campos do formulário.</span><span class="sxs-lookup"><span data-stu-id="778fb-119">Add unnecessary steps to the interaction like requiring users to click into form fields.</span></span>|
|<span data-ttu-id="778fb-120">Fornecer uma maneira para os usuários saírem e se autenticarem novamente.</span><span class="sxs-lookup"><span data-stu-id="778fb-120">Provide a way for users to sign-out and reauthenticate.</span></span>    |<span data-ttu-id="778fb-121">Forçar usuários a desinstalar para alternar entre identidades.</span><span class="sxs-lookup"><span data-stu-id="778fb-121">Force users to uninstall to switch identities.</span></span>|

> [!NOTE]
> <span data-ttu-id="778fb-122">Atualmente a API de logon único tem suporte em versão prévia para Word, Excel e PowerPoint.</span><span class="sxs-lookup"><span data-stu-id="778fb-122">The Single Sign-on API is currently supported in preview for Word, Excel, Outlook, and PowerPoint.</span></span> <span data-ttu-id="778fb-123">Confira mais informações sobre os programas para os quais a API de logon único tem suporte no momento em [Conjuntos de requisitos da IdentityAPI](https://docs.microsoft.com/javascript/office/requirement-sets/identity-api-requirement-sets?view=office-js).</span><span class="sxs-lookup"><span data-stu-id="778fb-123">For more information about where the Single Sign-on API is currently supported, see [IdentityAPI requirement sets](https://docs.microsoft.com/javascript/office/requirement-sets/identity-api-requirement-sets?view=office-js).</span></span> <span data-ttu-id="778fb-124">Se você estiver trabalhando com um suplemento do Outlook, certifique-se de habilitar a Autenticação Moderna para a locação do Office 365.</span><span class="sxs-lookup"><span data-stu-id="778fb-124">If you are working with an Outlook add-in, be sure to enable Modern Authentication for the Office 365 tenancy.</span></span> <span data-ttu-id="778fb-125">Confira mais informações sobre como fazer isso em [Exchange Online: como habilitar seu locatário para autenticação moderna](https://social.technet.microsoft.com/wiki/contents/articles/32711.exchange-online-how-to-enable-your-tenant-for-modern-authentication.aspx).</span><span class="sxs-lookup"><span data-stu-id="778fb-125">For information about how to do this, see [Exchange Online: How to enable your tenant for modern authentication](https://social.technet.microsoft.com/wiki/contents/articles/32711.exchange-online-how-to-enable-your-tenant-for-modern-authentication.aspx).</span></span>


## <a name="authentication-flow"></a><span data-ttu-id="778fb-126">Fluxo de autenticação</span><span class="sxs-lookup"><span data-stu-id="778fb-126">Authentication flow overview</span></span>
<span data-ttu-id="778fb-127">Se o logon único ainda não estiver disponível para seus usuários, considere um fluxo de autenticação alternativo.</span><span class="sxs-lookup"><span data-stu-id="778fb-127">If single sign-on is not yet available to your users, consider an alternative authentication flow.</span></span> <span data-ttu-id="778fb-128">Dê aos usuários a opção de se conectar diretamente com seu serviço ou com um provedor de identidade como a Microsoft.</span><span class="sxs-lookup"><span data-stu-id="778fb-128">Give users a choice to sign-in directly with your service or an identity provider like Microsoft.</span></span>

1. <span data-ttu-id="778fb-129">Placemat da tela de apresentação: coloque o botão de entrar como uma solicitação de ação clara dentro da tela de apresentação do seu suplemento.</span><span class="sxs-lookup"><span data-stu-id="778fb-129">First Run Placemat - Place your sign-in button as a clear call-to action inside your add-in's first run experience.</span></span>
![](../images/add-in-fre-value-placemat.png)

2. <span data-ttu-id="778fb-130">Diálogo de Opções do Provedor de Identidade: exibe uma lista clara de provedores de identidade, incluindo um formulário de nome de usuário e senha, quando aplicável.</span><span class="sxs-lookup"><span data-stu-id="778fb-130">Identity Provider Choices Dialog - Display a clear list of identity providers including a username and password form if applicable.</span></span> <span data-ttu-id="778fb-131">A interface do usuário de seu suplemento pode ser bloqueada enquanto o diálogo de autenticação estiver aberto.</span><span class="sxs-lookup"><span data-stu-id="778fb-131">Your add-in UI may be blocked while the authentication dialog is open.</span></span>
![](../images/add-in-auth-choices-dialog.png)



3. <span data-ttu-id="778fb-132">Conexão do Provedor de Identidade: o provedor de identidade terá sua própria interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="778fb-132">Identity Provider Sign-in - The identity provider will have their own UI.</span></span> <span data-ttu-id="778fb-133">O Active Directory do Microsoft Azure permite a personalização de páginas de credenciais e de painel de acesso para uma aparência consistente com seu serviço.</span><span class="sxs-lookup"><span data-stu-id="778fb-133">Microsoft Azure Active Directory allows customization of sign-in and access panel pages for consistent look and feel with your service.</span></span> <span data-ttu-id="778fb-134">[Saiba mais](https://docs.microsoft.com/azure/active-directory/fundamentals/customize-branding).</span><span class="sxs-lookup"><span data-stu-id="778fb-134">Learn more</span></span>
![](../images/add-in-auth-identity-sign-in.png)

4. <span data-ttu-id="778fb-135">Andamento: indica o andamento enquanto as configurações e a interface do usuário são carregadas.</span><span class="sxs-lookup"><span data-stu-id="778fb-135">Progress - Indicate progress while settings and UI load.</span></span>
![](../images/add-in-auth-modal-interstitial.png)

> [!NOTE] 
> <span data-ttu-id="778fb-136">Ao usar o serviço de identidade da Microsoft, você terá a oportunidade de usar um botão personalizado de entrada que é ajustável para temas claros e escuros.</span><span class="sxs-lookup"><span data-stu-id="778fb-136">When using Microsoft's Identity service you'll have the opportunity to use a branded sign-in button that is customizable to light and dark themes.</span></span> <span data-ttu-id="778fb-137">Saiba mais.</span><span class="sxs-lookup"><span data-stu-id="778fb-137">Learn more.</span></span>

## <a name="single-sign-on-authentication-flow"></a><span data-ttu-id="778fb-138">Fluxo de autenticação de logon único</span><span class="sxs-lookup"><span data-stu-id="778fb-138">Single Sign-On authentication flow</span></span>
<span data-ttu-id="778fb-139">O logon único ainda é uma versão prévia.</span><span class="sxs-lookup"><span data-stu-id="778fb-139">Single sign-on is still in preview.</span></span> <span data-ttu-id="778fb-140">Assim que ele estiver disponível a todos, use-o para oferecer a melhor experiência ao usuário final.</span><span class="sxs-lookup"><span data-stu-id="778fb-140">Once generally available, use it for the smoothest end-user experience.</span></span> <span data-ttu-id="778fb-141">A identidade do usuário no Office é usada para se conectar ao seu suplemento.</span><span class="sxs-lookup"><span data-stu-id="778fb-141">The user's identity within Office is used to sign-in to your add-in.</span></span> <span data-ttu-id="778fb-142">Desta forma, os usuários só se conectam uma vez.</span><span class="sxs-lookup"><span data-stu-id="778fb-142">As a result users only sign-in once.</span></span> <span data-ttu-id="778fb-143">Isso deixa a experiência mais fluida, fazendo com que seja mais fácil de começar para seus clientes.</span><span class="sxs-lookup"><span data-stu-id="778fb-143">This removes friction in the experience making it easier for your customers to get started.</span></span>

1. <span data-ttu-id="778fb-144">Ao instalar um suplemento, o usuário verá uma janela de consentimento semelhante a esta: ![](../images/add-in-auth-SSO-consent-dialog.png)</span><span class="sxs-lookup"><span data-stu-id="778fb-144">As an add-in is being installed, a user will see a consent window similar to the one below: ![](../images/add-in-auth-SSO-consent-dialog.png)</span></span>
> [!NOTE]
> <span data-ttu-id="778fb-145">O publicador de suplementos terá controle sobre: o logotipo, as cadeias de caracteres e os escopos de permissão, incluídos na janela de consentimento.</span><span class="sxs-lookup"><span data-stu-id="778fb-145">The add-in publisher will have control over the logo, strings and permission scopes included in the consent window.</span></span> <span data-ttu-id="778fb-146">A interface do usuário é pré-configurada pela Microsoft.</span><span class="sxs-lookup"><span data-stu-id="778fb-146">The UI is pre-configured by Microsoft.</span></span>

2. <span data-ttu-id="778fb-147">O suplemento será carregado depois que o usuário der seu consentimento.</span><span class="sxs-lookup"><span data-stu-id="778fb-147">The add-in will load after the user consents.</span></span> <span data-ttu-id="778fb-148">É possível extrair do usuário e exibir a ele qualquer informação personalizada necessária.</span><span class="sxs-lookup"><span data-stu-id="778fb-148">It can extract and display any necessary user customized information.</span></span>
![](../images/add-in-ribbon.png)

## <a name="see-also"></a><span data-ttu-id="778fb-149">Confira também</span><span class="sxs-lookup"><span data-stu-id="778fb-149">See also</span></span>
- <span data-ttu-id="778fb-150">Saiba mais sobre [desenvolvimento de suplementos de logon único](https://docs.microsoft.com/office/dev/add-ins/develop/sso-in-office-add-ins)</span><span class="sxs-lookup"><span data-stu-id="778fb-150">Learn more about [developing SSO Add-ins](https://docs.microsoft.com/office/dev/add-ins/develop/sso-in-office-add-ins)</span></span>